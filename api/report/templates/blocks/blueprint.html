<section>
    <h2 id="Blueprint">Blueprint Priorities</h2>

    {% if maps.blueprint %}
        <div class="map-container">
            <img src="data:image/png;base64,{{maps.blueprint}}" alt="Conservation Blueprint map" class="map">

            {% include "elements/north_arrow.html" %}
        </div>

        {% include "elements/map_footer.html" %}

        <div class="flex map-footer">
            <div class="map-locator-container">
                {% if maps.locator %}
                    <img src="data:image/png;base64,{{maps.locator}}" alt="Locator map" class="map-locator">
                {% endif %}
            </div>

            <div class="legend">
                <h4>Priorities for a connected network of lands and waters</h4>
                <!-- omit not a priority -->
                {% for item in legends.blueprint[:-1] %}
                    <div class="legend-element flex align-center">
                        <div class="legend-patch" style="background: {{item.color}}"></div>
                        <div class="legend-label">{{item.label}}</div>
                    </div>
                {% endfor %}
                <!-- space is required or last label doesn't render -->
                &nbsp;
            </div>
        </div>

    {% else %}
        <div class="map-placeholder text-center">
            map could not be created
        </div>
    {% endif %}
</section>

<section>
    <h2 style="margin: 0;">Priority Categories</h2>
    <h4 style="margin: 0;">For a connected network of lands and waters</h4>
    <p>
        In total, Blueprint priorities and priority connections cover roughly 50% of the Southeast Blueprint geography.
    </p>

    <!-- omit not a priority -->
    {% for item in legends.blueprint[:-1] %}
        <h4>
            {{item.label}}
        </h4>
        <p>
            {{item.description}}

            This class covers roughly {{item.percent}}% of the Southeast Blueprint geography.
        </p>
    {% endfor %}



<div class="spacer"></div>

{% with number=table.counter,label="Extent of each Blueprint priority category" %}
    {% include "elements/table_caption.html" %}
{% endwith %}
{% set table.counter=table.counter+1 %}

<table class="centered">
    <thead>
        <tr>
            <th class="label">Priority Category</th>
            <th class="acres">Acres</th>
            <th class="percent">Percent of Area</th>
        </tr>
    </thead>
    <tbody>
        {% for item in results.blueprint %}
        <tr>
            <td class="label">{{item.label}}</td>
            <td class="acres">{{item.acres|format_number}}</td>
            <td class="percent">{{item.percent|format_percent}}%</td>
        </tr>
        {% endfor %}

        {% if results.outside_se_acres > 0 %}
            <tr class="remainder-row">
                <td class="label">Outside Southeast Blueprint</td>
                <td class="acres">{{results.outside_se_acres|format_number}}</td>
                <td class="percent">{{results.outside_se_percent|format_percent}}%</td>
            </tr>
        {% endif %}

        <tr class="total-row">
            <td class="label align-right">Total area</td>
            <td class="acres">{{results.rasterized_acres|format_number}}</td>
            <td class="percent">100%</td>
        </tr>
    </tbody>
</table>

{% if results.promote_base %}
    {% with src=results.inputs[0] %}
        {% if "corridors" in results %}
            {% include "blocks/corridors.html" %}
        {% else %}
            {% include "blocks/no_corridors.html" %}
        {% endif %}

        {% with ecosystems=src.ecosystems %}
            {% include "blocks/ecosystems.html" %}
        {% endwith %}
    {% endwith %}

{% else %}
    {% for src in results.inputs %}
        {% include "blocks/blueprint_input.html" %}
    {% endfor %}

{% endif %}

</section>